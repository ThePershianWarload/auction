<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
		"-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
		"http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>

	<package name="auction" extends="struts-default">
		
		<interceptors>
    		<interceptor name="authority" class="action.AuthorityInterceptor"></interceptor> 
    		<!-- 定义公共的拦截器链，在action标签中只需要引用拦截器链 -->
    		<interceptor-stack name="defaultinter"> 
      			<interceptor-ref name="authority"></interceptor-ref> 
      			<interceptor-ref name="defaultStack"></interceptor-ref> 
    		</interceptor-stack> 
  		</interceptors>
  		
		<default-interceptor-ref name="defaultinter"></default-interceptor-ref>

		<global-results>
			<result name="login">/public/LoginForm.jsp</result>
		</global-results>
		<action name="">
			<result>/public/index.jsp</result>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>

		<action name="createImageAction" class="action.CreateImageAction">
				<result name="success" type="stream">
					<param name="contentType">image/jpeg</param>
					<param name="inputName">inputStream</param>
				</result>
				<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>

		<action name="login" class="action.UserLoginAction">
			<result name="success">/public/welcome.jsp</result>
			<result name="error">error</result>
			<result name="none">none</result>
			<result name="input">input</result>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		
		<action name="register" class="action.UserRegisterAction">
			<result name="success">/welcome</result>
			<interceptor-ref name="defaultStack"></interceptor-ref>
		</action>
		
		<action name="updatePassword" class="action.UserUpdatePasswordAction">
			<result name="success">/success</result>
			<result name="error">/error</result>
		</action>
		
		<action name="updateInfo" class="action.UserUpdateInfo">
			<result name="success">/success</result>
			<result name="error">/error</result>
		</action>
		
		<action name="userExit" class="action.UserExitAction">
			<result name="success">welcome</result>
		</action>

		<action name="*">
			<result>/public/{1}.jsp</result>
			<interceptor-ref name="authority"></interceptor-ref>
		</action>
		
		
	</package>

</struts>